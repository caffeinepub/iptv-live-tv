{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "IPTV live TV app that plays streams via IPTV links, with sorting/filtering by language, country, and favourites.",
  "architectural_notes": [
    "App is an IPTV client — streams are loaded from user-provided or bundled M3U/IPTV URLs",
    "Channel metadata (language, country, name) parsed from M3U playlist entries",
    "M3U playlist is fetched client-side from a user-provided URL; CORS issues may require a proxy or backend fetch"
  ],
  "known_issues": [
    "Channels not loading — M3U URL input and fetch/parse flow not yet functional",
    "UI rendering in light mode instead of dark mode despite dark cinematic theme requirement"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-build-a-main-channel-browser-page-that-displays-all-iptv-channels-in-a-grid-layout-each-channel-card-shows-the-channel-logo-name-language-and-country-clicking-a-card-opens-the-stream-player",
      "title": "Build a main channel browser page that displays all IPTV channels in a grid layout. Each channel card shows the channel logo, name, language, and country. Clicking a card opens the stream player.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-inline-hls-m3u8-compatible-video-player-using-hls-js-that-plays-the-selected-channel-s-iptv-stream-url-directly-in-the-browser-display-the-channel-name-and-country-as-an-overlay-while-playing",
      "title": "Implement an inline HLS/M3U8-compatible video player (using hls.js) that plays the selected channel's IPTV stream URL directly in the browser. Display the channel name and country as an overlay while playing.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-filter-controls-above-the-channel-grid-to-filter-channels-by-language-and-by-country-populate-the-filter-dropdowns-dynamically-from-the-available-channel-data-filters-can-be-combined-e-g-language-spanish-and-country-mexico",
      "title": "Add filter controls above the channel grid to filter channels by language and by country. Populate the filter dropdowns dynamically from the available channel data. Filters can be combined (e.g., language=Spanish AND country=Mexico).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-favourites-toggle-button-on-each-channel-card-users-can-mark-unmark-channels-as-favourites-add-a-favourites-filter-tab-at-the-top-of-the-channel-browser-to-show-only-favourited-channels-favourites-are-persisted-via-the-backend",
      "title": "Add a Favourites toggle button on each channel card. Users can mark/unmark channels as favourites. Add a 'Favourites' filter tab at the top of the channel browser to show only favourited channels. Favourites are persisted via the backend.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-dark-cinematic-visual-theme-across-the-entire-app-deep-dark-backgrounds-0d0d0d-to-1a1a2e-vivid-accent-colours-in-red-amber-for-highlights-and-active-states-bold-sans-serif-typography-glowing-card-hover-effects-and-a-sleek-top-navigation-bar-with-the-app-logo-and-filter-tabs-ensure-the-theme-is-consistent-across-the-channel-grid-player-and-filter-controls",
      "title": "Apply a dark, cinematic visual theme across the entire app: deep dark backgrounds (#0d0d0d to #1a1a2e), vivid accent colours in red/amber for highlights and active states, bold sans-serif typography, glowing card hover effects, and a sleek top navigation bar with the app logo and filter tabs. Ensure the theme is consistent across the channel grid, player, and filter controls.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-use-a-custom-app-logo-image-for-the-top-navigation-bar-and-a-default-channel-placeholder-thumbnail-for-channels-without-a-logo",
      "title": "Generate and use a custom app logo image for the top navigation bar and a default channel placeholder thumbnail for channels without a logo.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-visible-m3u-url-input-field-on-the-channel-browser-page-pre-filled-with-https-iptv-org-github-io-iptv-index-m3u-when-the-user-submits-the-url-fetch-the-m3u-playlist-client-side-using-the-browser-fetch-api-parse-all-extinf-entries-extracting-channel-name-logo-tvg-logo-language-group-title-or-tvg-language-country-tvg-country-and-stream-url-then-populate-the-channel-grid-with-the-parsed-channels-the-fetch-and-parse-must-run-automatically-on-page-load-using-the-pre-filled-url-so-channels-appear-without-requiring-any-manual-action-from-the-user",
      "title": "Add a visible M3U URL input field on the Channel Browser page (pre-filled with https://iptv-org.github.io/iptv/index.m3u). When the user submits the URL, fetch the M3U playlist client-side using the browser Fetch API, parse all #EXTINF entries extracting channel name, logo (tvg-logo), language (group-title or tvg-language), country (tvg-country), and stream URL, then populate the channel grid with the parsed channels. The fetch and parse must run automatically on page load using the pre-filled URL so channels appear without requiring any manual action from the user.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-the-m3u-fetch-must-be-performed-in-the-browser-using-the-fetch-api-with-a-cors-proxy-e-g-https-corsproxy-io-url-encoded-url-if-the-direct-fetch-fails-due-to-cors-restrictions-so-that-the-iptv-org-github-pages-m3u-file-is-reliably-retrieved-without-server-side-code",
      "title": "The M3U fetch must be performed in the browser using the Fetch API with a CORS proxy (e.g. https://corsproxy.io/?url=<encoded-url>) if the direct fetch fails due to CORS restrictions, so that the iptv-org GitHub Pages M3U file is reliably retrieved without server-side code.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-add-channel-button-on-the-channel-browser-page-that-opens-a-modal-form-allowing-users-to-manually-enter-an-individual-iptv-stream-link-the-form-must-accept-at-minimum-channel-name-required-and-stream-url-required-plus-optional-fields-for-logo-url-language-and-country-on-submission-the-channel-is-added-to-the-current-channel-grid-alongside-any-m3u-parsed-channels-and-is-immediately-visible-and-playable-the-added-channel-must-persist-in-the-session-so-it-survives-filter-changes",
      "title": "Add an 'Add Channel' button on the Channel Browser page that opens a modal/form allowing users to manually enter an individual IPTV stream link. The form must accept at minimum: channel name (required) and stream URL (required), plus optional fields for logo URL, language, and country. On submission, the channel is added to the current channel grid (alongside any M3U-parsed channels) and is immediately visible and playable. The added channel must persist in the session so it survives filter changes.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-search-input-field-above-the-channel-grid-on-the-channel-browser-page-that-filters-both-m3u-parsed-and-manually-added-channels-by-name-in-real-time-the-search-is-case-insensitive-and-matches-any-substring-of-the-channel-name-the-search-filter-must-compose-with-the-existing-language-country-and-favourites-filters-so-all-active-filters-apply-simultaneously",
      "title": "Add a search input field above the channel grid on the Channel Browser page that filters both M3U-parsed and manually added channels by name in real time. The search is case-insensitive and matches any substring of the channel name. The search filter must compose with the existing language, country, and favourites filters so all active filters apply simultaneously.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-playlists-section-to-the-navigation-bar-alongside-the-existing-all-channels-favourites-tabs-authenticated-users-can-create-new-named-playlists-via-a-button-that-opens-a-small-modal-prompt-for-the-playlist-name-each-playlist-appears-as-a-tab-chip-in-the-nav-clicking-it-filters-the-channel-grid-to-show-only-channels-in-that-playlist-a-delete-icon-on-each-playlist-tab-allows-removing-it",
      "title": "Add a 'Playlists' section to the Navigation bar alongside the existing All Channels / Favourites tabs. Authenticated users can create new named playlists via a '+' button that opens a small modal prompt for the playlist name. Each playlist appears as a tab/chip in the nav; clicking it filters the channel grid to show only channels in that playlist. A delete (×) icon on each playlist tab allows removing it.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-add-to-playlist-action-on-each-channel-card-e-g-a-small-bookmark-list-icon-button-when-clicked-by-an-authenticated-user-a-dropdown-or-mini-modal-appears-listing-all-their-playlists-with-a-checkbox-or-toggle-for-each-allowing-the-channel-to-be-added-to-or-removed-from-any-playlist-in-one-interaction-persist-changes-immediately-via-the-backend-addchanneltoplaylist-removechannelfromplaylist-functions",
      "title": "Add an 'Add to Playlist' action on each channel card (e.g., a small bookmark/list icon button). When clicked by an authenticated user, a dropdown or mini-modal appears listing all their playlists with a checkbox or toggle for each, allowing the channel to be added to or removed from any playlist in one interaction. Persist changes immediately via the backend addChannelToPlaylist / removeChannelFromPlaylist functions.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-star-favourite-toggle-button-to-the-fullscreen-video-player-overlay-that-appears-when-the-user-taps-or-clicks-anywhere-on-the-screen-while-a-channel-is-playing-in-fullscreen-mode-the-button-must-be-clearly-visible-over-the-video-e-g-top-right-or-bottom-toolbar-area-of-the-fullscreen-overlay-reflect-the-current-favourite-state-filled-star-favourited-outline-star-not-favourited-and-toggling-it-must-immediately-add-or-remove-the-channel-from-favourites-using-the-same-favourite-persistence-mechanism-used-on-channel-cards-uselocalfavourites-for-m3u-channels-backend-addfavourite-removefavourite-for-authenticated-backend-channels",
      "title": "Add a star (☆/★) favourite toggle button to the fullscreen video player overlay that appears when the user taps or clicks anywhere on the screen while a channel is playing in fullscreen mode. The button must be clearly visible over the video (e.g., top-right or bottom toolbar area of the fullscreen overlay), reflect the current favourite state (filled star = favourited, outline star = not favourited), and toggling it must immediately add or remove the channel from favourites using the same favourite persistence mechanism used on channel cards (useLocalFavourites for M3U channels; backend addFavourite/removeFavourite for authenticated backend channels).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-dedicated-favourites-section-page-view-in-the-channel-browser-that-displays-only-the-channels-the-user-has-marked-as-favourites-for-m3u-guest-users-show-channels-whose-ids-are-stored-in-uselocalfavourites-for-authenticated-users-show-channels-from-the-backend-getfavourites-list-the-section-must-be-accessible-via-the-existing-favourites-filter-tab-in-the-navigation-bar-and-must-compose-with-all-active-filters-search-language-country-so-that-favourite-channels-can-be-further-narrowed-down",
      "title": "Add a dedicated 'Favourites' section/page view in the channel browser that displays only the channels the user has marked as favourites. For M3U/guest users, show channels whose IDs are stored in useLocalFavourites. For authenticated users, show channels from the backend getFavourites list. The section must be accessible via the existing 'Favourites' filter tab in the Navigation bar and must compose with all active filters (search, language, country) so that favourite channels can be further narrowed down.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-entire-app-renders-in-dark-mode-by-default-the-html-root-element-must-have-the-dark-class-applied-at-all-times-or-the-app-must-be-configured-to-always-use-the-dark-color-scheme-all-components-including-the-navigation-bar-channel-grid-channel-cards-filter-controls-video-player-and-modals-must-use-the-dark-cinematic-css-variable-tokens-deep-dark-backgrounds-0d0d0d-to-1a1a2e-red-amber-accents-already-defined-in-frontend-src-index-css-remove-or-override-any-light-mode-fallback-styles-that-are-causing-components-to-render-with-light-backgrounds-or-light-text",
      "title": "Ensure the entire app renders in dark mode by default. The HTML root element must have the 'dark' class applied at all times (or the app must be configured to always use the dark color scheme). All components — including the navigation bar, channel grid, channel cards, filter controls, video player, and modals — must use the dark cinematic CSS variable tokens (deep dark backgrounds #0d0d0d to #1a1a2e, red/amber accents) already defined in frontend/src/index.css. Remove or override any light-mode fallback styles that are causing components to render with light backgrounds or light text.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Play live TV streams via IPTV links",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Sort/filter channels by language",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Sort/filter channels by country",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Mark channels as favourites and filter by favourites",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Create a backend actor that stores IPTV channel data including name, stream URL, language, country, and a logo/thumbnail URL. Provide CRUD operations: add channel, get all channels, update channel, delete channel. Pre-populate with a set of sample IPTV channels across diverse languages and countries.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Create a backend mechanism to persist per-user favourite channel IDs. Expose addFavourite, removeFavourite, and getFavourites functions keyed by caller principal.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add M3U URL input field so users can paste a URL (e.g. https://iptv-org.github.io/iptv/index.m3u), fetch and parse the M3U playlist, and populate the channel grid with all filters working",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add option for users to manually add individual IPTV stream links (channel name + stream URL) to the channel grid",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add a search bar to filter/search channels by name in the channel browser",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add a backend data structure to store named custom playlists per user (keyed by caller principal). Each playlist has a unique ID, a user-defined name, and an ordered list of channel IDs. Expose functions: createPlaylist(name), deletePlaylist(playlistId), addChannelToPlaylist(playlistId, channelId), removeChannelFromPlaylist(playlistId, channelId), getMyPlaylists() returning all playlists for the caller.",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Add a star/favourite toggle button that appears when tapping the channel icon or anywhere on the screen while watching a channel in fullscreen mode",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "IPTV Live TV",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}